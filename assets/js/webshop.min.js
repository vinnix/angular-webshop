angular.module("templates-webshop", [ "webshop-add-to-cart.tpl.html", "webshop-cart.tpl.html", "webshop-dummy.tpl.html", "webshop-image.tpl.html", "webshop-product-description.tpl.html", "webshop-product-list.tpl.html" ]), 
angular.module("webshop-add-to-cart.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-add-to-cart.tpl.html", '<button ng-click="addToCart(product)">Add to cart</button>');
} ]), angular.module("webshop-cart.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-cart.tpl.html", '<h2>Cart</h2>\n\n<p ng-show="emptyCart">Cart is empty</p>\n\n<ul>\n    <li ng-repeat="item in cart | orderBy:\'title\':false">\n        <a ng-href="{{ productPage + \'/\' + item.product.id }}">{{ item.product.title }}</a>\n        {{ item.count }}\n        <button ng-click="decrementCart(item.product)">-</button>\n        <button ng-click="incrementCart(item.product)">+</button>\n        <button ng-click="removeFromCart(item.product)">Remove</button>\n    </li>\n</ul>\n');
} ]), angular.module("webshop-dummy.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-dummy.tpl.html", "");
} ]), angular.module("webshop-image.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-image.tpl.html", '<img ng-if="image" ng-src="{{ image }}" ng-class="imgClass">');
} ]), angular.module("webshop-product-description.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-product-description.tpl.html", '<h2>{{ product.title }}</h2>\n\n<p><webshop-image id="{{ product.main_image }}"></webshop-image></p>\n\n<p ng-bind-html="product.description"></p>\n\n<p><webshop-add-to-cart product="product"></webshop-add-to-cart></p>');
} ]), angular.module("webshop-product-list.tpl.html", []).run([ "$templateCache", function(a) {
    a.put("webshop-product-list.tpl.html", "<h2>Products</h2>\n\n<ul>\n    <li ng-repeat=\"product in products | orderBy:'title':false\"><a ng-href=\"{{ productPage + '/' + product.id }}\">{{ product.title }}</a></li>\n</ul>\n");
} ]), function() {
    "use strict";
    var a = angular.module("webshop-add-to-cart", []);
    a.directive("webshopAddToCart", [ "Cart", function(a) {
        return {
            restrict: "E",
            templateUrl: "webshop-add-to-cart.tpl.html",
            scope: {
                product: "="
            },
            controller: function(a, b) {
                a.addToCart = function(a) {
                    b.add(a);
                };
            }
        };
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-cart", []);
    a.directive("webshopCart", [ "$rootScope", "Cart", function(a, b) {
        return {
            restrict: "E",
            templateUrl: "webshop-cart.tpl.html",
            scope: {},
            controller: function(a, b, c) {
                var d = function() {
                    a.cart = c.list(), a.emptyCart = c.isCartEmpty();
                };
                a.decrementCart = function(a) {
                    c.decrement(a);
                }, a.incrementCart = function(a) {
                    c.increment(a);
                }, a.removeFromCart = function(a) {
                    c.remove(a);
                }, b.$on("cartUpdated", function() {
                    d();
                }), d();
            }
        };
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-dummy", []);
    a.directive("webshopDummy", [ "$rootScope", "$window", "$filter", "$timeout", "$interval", "$resource", function(a, b, c, d, e, f) {
        return {
            restrict: "E",
            templateUrl: "webshop-dummy.tpl.html",
            scope: {},
            link: function(a, b, c) {}
        };
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-factory-cart", [ "LocalStorageModule" ]);
    a.factory("Cart", [ "$rootScope", "localStorageService", function(a, b) {
        var c = {}, d = {}, e = function() {
            var a = b.get("cart");
            a && (d = a);
        }, f = function() {
            b.set("cart", d);
        }, g = function(a) {
            d[a.id] = {
                product: a,
                count: 0
            };
        }, h = function(a) {
            d[a.id].count = d[a.id].count - 1;
        }, i = function(a) {
            d[a.id].count = d[a.id].count + 1;
        }, j = function() {
            a.$emit("cartUpdated", 1);
        };
        return c.add = function(a) {
            a && a.id && (e(), d[a.id] || g(a), i(a), f(), j());
        }, c.decrement = function(a) {
            a && a.id && d[a.id] && (e(), 1 == d[a.id].count ? delete d[a.id] : h(a), f(), j());
        }, c.increment = function(a) {
            a && a.id && d[a.id] && (e(), i(a), f(), j());
        }, c.remove = function(a) {
            a && a.id && (e(), delete d[a.id], f(), j());
        }, c.isCartEmpty = function() {
            for (var a in d) if (d.hasOwnProperty(a)) return !1;
            return !0;
        }, c.list = function() {
            return e(), d;
        }, c;
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-factory-rest", [ "ngResource" ]);
    a.factory("Product", [ "$resource", "Config", function(a, b) {
        return a(b.backend + "/product/:id", {
            id: "@id"
        });
    } ]), a.factory("ProductImages", [ "$resource", "Config", function(a, b) {
        return a(b.backend + "/product/:product/images/:image", {
            product: "@product",
            image: "@image"
        });
    } ]), a.factory("ProductCategories", [ "$resource", "Config", function(a, b) {
        return a(b.backend + "/product/:product/categories/:category", {
            product: "@product",
            category: "@category"
        });
    } ]), a.factory("Image", [ "$resource", "Config", function(a, b) {
        return a(b.backend + "/image/:id", {
            id: "@id"
        });
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-image", []);
    a.directive("webshopImage", [ "Image", function(a) {
        return {
            restrict: "E",
            templateUrl: "webshop-image.tpl.html",
            scope: {
                imageId: "@id"
            },
            controller: function(a, b, c, d, e) {
                var f = 480, g = 640, h = function(h) {
                    e.get({
                        id: h
                    }).$promise.then(function(e) {
                        if (e.cloudinary && e.cloudinary.cloud_name && e.cloudinary.public_id) {
                            var h, i, j = d.devicePixelRatio ? d.devicePixelRatio : 1, k = b.circle ? "png" : "jpg", l = e.cloudinary.cloud_name, m = e.cloudinary.public_id;
                            b.imgClass && (a.imgClass = b.imgClass), "auto" === b.size ? (h = c.parent()[0].offsetParent.clientWidth ? Math.round(c.parent()[0].offsetParent.clientWidth) : 0, 
                            i = c.parent()[0].offsetParent.clientHeight ? Math.round(c.parent()[0].offsetParent.clientHeight) : 0, 
                            0 === h && i > 0 ? h = i : 0 === i && h > 0 ? i = h : b.width > 0 ? (h = b.width, 
                            i = b.height > 0 ? b.height : h) : 0 === h && 0 === i && (h = f, i = g)) : (h = b.width ? b.width : f, 
                            i = b.height ? b.height : g), h *= j, i *= j;
                            var n = "//res.cloudinary.com/" + l + "/image/upload/";
                            n = b.circle ? n + "w_" + h + ",h_" + h + ",c_thumb,r_max" : b.square ? n + "w_" + h + ",h_" + h + ",c_thumb" : n + "w_" + h + ",h_" + i + ",c_fill", 
                            n = n + "/" + m + "." + k, a.image = n;
                        } else a.image = "/assets/empty.png";
                    });
                };
                a.$watch("imageId", function(a, b) {
                    a && (console.log("Fetching", a), h(a));
                });
            }
        };
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-product-description", [ "webshop-image" ]);
    a.directive("webshopProductDescription", [ "Config", "Product", function(a, b) {
        return {
            restrict: "E",
            templateUrl: "webshop-product-description.tpl.html",
            scope: {
                productId: "@product"
            },
            controller: function(a, b, c) {
                var d = function() {
                    c.get({
                        id: a.productId
                    }).$promise.then(function(c) {
                        a.product = c, a.product.description = b.trustAsHtml(a.product.description);
                    });
                };
                a.$watch("productId", function(a, b) {
                    a && d();
                });
            }
        };
    } ]);
}(), function() {
    "use strict";
    var a = angular.module("webshop-product-list", []);
    a.directive("webshopProductList", [ "Config", "Product", function(a, b) {
        return {
            restrict: "E",
            templateUrl: "webshop-product-list.tpl.html",
            scope: {},
            controller: function(a, b, c) {
                c.get().$promise.then(function(b) {
                    a.products = b.products;
                }), b && b.productPage ? a.productPage = b.productPage : a.productPage = "#!/product";
            }
        };
    } ]);
}(), function() {
    "use strict";
    angular.module("webshop", [ "webshop-factory-cart", "webshop-factory-rest", "webshop-product-list", "webshop-product-description", "webshop-cart", "webshop-add-to-cart", "templates-webshop" ]);
}();